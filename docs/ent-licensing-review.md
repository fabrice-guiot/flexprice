# Enterprise Licensing Review

## The `ent/` Folder

The `ent/` directory is **not** an enterprise licensing module â€” it contains **auto-generated database entity code** from the [Ent ORM framework](https://entgo.io/) for Go. All files carry the header `// Code generated by ent, DO NOT EDIT.` and contain no license headers of their own. They inherit the root project license implicitly. This folder has no relation to enterprise licensing.

## Dual Licensing Model

The project uses two distinct licenses:

| Scope | License | File |
|---|---|---|
| Root application | **AGPL v3** (open source) | `/LICENSE` |
| Enterprise features | **Flexprice Enterprise License** (proprietary) | `/internal/ee/LICENSE` |

The enterprise license (`internal/ee/LICENSE`) is a proprietary license requiring a valid Flexprice Enterprise subscription for production use. It covers features like wallets, credit grants, credit notes, invoice grace periods, and billing timezone support.

## No License Key Protection

There is **no runtime license key validation** anywhere in the codebase. Specifically:

- No `ValidateLicense()`, `CheckLicense()`, or similar functions exist.
- No `LICENSE_KEY` or `FLEXPRICE_LICENSE_KEY` environment variable is referenced.
- No feature-gating middleware on API routes for enterprise features.
- No license expiration or seat-count enforcement.
- No enterprise feature flags in the config (`internal/config/config.go`).

All six enterprise services are **unconditionally registered** in `cmd/server/main.go` (lines 245-252):

```go
// Enterprise (ee) services
ee.NewEnterpriseParams,
ee.NewCreditNoteService,
ee.NewCreditGrantService,
ee.NewWalletService,
ee.NewPrepaidCreditsService,
ee.NewBillingTimezoneService,
ee.NewInvoiceGracePeriodService,
```

## Enterprise Features (internal/ee/)

The following services live under `internal/ee/service/` and are gated only by source-code inclusion:

| Service | File | Description |
|---|---|---|
| WalletService | `wallet.go` | Prepaid balance management |
| CreditGrantService | `credit_grants.go` | Prepaid usage with credits |
| CreditNoteService | `credit_notes.go` | Credit note lifecycle |
| PrepaidCreditsService | `prepaid_credits.go` | Composite credit grant + wallet |
| InvoiceGracePeriodService | `invoice_grace_period.go` | Grace period configuration |
| BillingTimezoneService | `billing_timezone.go` | Customer timezone billing |

## Summary

The enterprise features in `internal/ee/` are protected only by a **trust-based, source-code-level model**: the proprietary license text states that production use requires a valid subscription, but there is no technical enforcement (no license key check, no feature toggle, no build-time exclusion). Anyone with access to the source code can compile and run the full application including all enterprise features without any license validation blocking them.
